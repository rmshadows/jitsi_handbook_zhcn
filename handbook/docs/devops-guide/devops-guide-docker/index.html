<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-devops-guide/devops-guide-docker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">自托管指南 - Docker | Jitsi Meet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://civiccccc.ltd/handbook/img/undraw_online.svg"><meta data-rh="true" name="twitter:image" content="https://civiccccc.ltd/handbook/img/undraw_online.svg"><meta data-rh="true" property="og:url" content="https://civiccccc.ltd/handbook/docs/devops-guide/devops-guide-docker"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="自托管指南 - Docker | Jitsi Meet"><meta data-rh="true" name="description" content="Quick start - 快速上手"><meta data-rh="true" property="og:description" content="Quick start - 快速上手"><link data-rh="true" rel="icon" href="/handbook/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://civiccccc.ltd/handbook/docs/devops-guide/devops-guide-docker"><link data-rh="true" rel="alternate" href="https://civiccccc.ltd/handbook/docs/devops-guide/devops-guide-docker" hreflang="en"><link data-rh="true" rel="alternate" href="https://civiccccc.ltd/handbook/docs/devops-guide/devops-guide-docker" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://K2ODL876OV-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Jitsi Meet" href="/handbook/opensearch.xml"><link rel="stylesheet" href="/handbook/assets/css/styles.33cde50c.css">
<script src="/handbook/assets/js/runtime~main.ed123826.js" defer="defer"></script>
<script src="/handbook/assets/js/main.b06072b5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/handbook/"><div class="navbar__logo"><img src="/handbook/img/logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/handbook/img/logo.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Jitsi Meet Handbook</b></a><a class="navbar__item navbar__link" href="/handbook/docs/intro">Docs - 文档</a><a class="navbar__item navbar__link" href="/handbook/docs/category/sdks">SDKs</a><a class="navbar__item navbar__link" href="/handbook/docs/releases">Releases - 发布</a><a href="https://community.jitsi.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community - 社区<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://jaas.8x8.vc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">JaaS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jitsi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/handbook/docs/intro">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/handbook/docs/community/community-intro">Community</a><button aria-label="Expand sidebar category &#x27;Community&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/handbook/docs/category/user-guide">User Guide</a><button aria-label="Expand sidebar category &#x27;User Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/handbook/docs/category/developer-guide">Developer Guide</a><button aria-label="Expand sidebar category &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/handbook/docs/devops-guide/">Self-Hosting Guide</a><button aria-label="Collapse sidebar category &#x27;Self-Hosting Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/handbook/docs/category/deployment">Deployment</a><button aria-label="Collapse sidebar category &#x27;Deployment&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/handbook/docs/devops-guide/devops-guide-requirements">Requirements - 配置要求</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/handbook/docs/devops-guide/devops-guide-quickstart">Debian/Ubuntu server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/handbook/docs/devops-guide/devops-guide-opensuse">openSUSE</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/handbook/docs/devops-guide/devops-guide-docker">Docker</a><button aria-label="Collapse sidebar category &#x27;Docker&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/handbook/docs/devops-guide/devops-guide-log-analyser">Log Analyser - 日志分析器</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/handbook/docs/category/configuration">Configuration</a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/handbook/docs/devops-guide/devops-guide-videotutorials">Video Tutorials - 视频教学</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/handbook/docs/devops-guide/faq">FAQ - 常见问题解答</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/handbook/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/handbook/docs/devops-guide/"><span itemprop="name">Self-Hosting Guide</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/handbook/docs/category/deployment"><span itemprop="name">Deployment</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Docker</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>自托管指南 - Docker</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start---快速上手">Quick start - 快速上手<a href="#quick-start---快速上手" class="hash-link" aria-label="Direct link to Quick start - 快速上手" title="Direct link to Quick start - 快速上手">​</a></h2>
<p>要在运行 Docker 和 Docker Compose 的机器上快速运行 Jitsi Meet，按照以下步骤操作：</p>
<ol>
<li>
<p>下载并解压 [最新发布版本]。 <strong>请勿</strong> 直接克隆 git 仓库。如果您想运行测试镜像，请参见下文：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">curl</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable parameter variable" style="color:rgb(191, 199, 213)">-s</span><span class="token variable" style="color:rgb(191, 199, 213)"> https://api.github.com/repos/jitsi/docker-jitsi-meet/releases/latest </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable function" style="color:rgb(130, 170, 255)">grep</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;zip&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable function" style="color:rgb(130, 170, 255)">cut</span><span class="token variable" style="color:rgb(191, 199, 213)"> -d</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:rgb(191, 199, 213)">&quot; </span><span class="token variable parameter variable" style="color:rgb(191, 199, 213)">-f4</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>解压包：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">unzip</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">filename</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>通过复制并调整 <code>env.example</code> 来创建 <code>.env</code> 文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> env.example .env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>通过运行以下 bash 脚本，在 <code>.env</code> 文件的安全部分设置强密码：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./gen-passwords.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>创建所需的 <code>CONFIG</code> 目录</p>
<ul>
<li>对于 Linux：</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-p</span><span class="token plain"> ~/.jitsi-meet-cfg/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">web,transcripts,prosody/config,prosody/prosody-plugins-custom,jicofo,jvb,jigasi,jibri</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>对于 Windows：</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> web,transcripts,prosody/config,prosody/prosody-plugins-custom,jicofo,jvb,jigasi,jibri </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> % </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;~/.jitsi-meet-cfg/</span><span class="token string variable" style="color:rgb(191, 199, 213)">$_</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>运行以下命令启动服务（译者：建议使用<code>docker-compose</code>输出更简洁）：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> compose up </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>通过 <a href="https://localhost:8443" target="_blank" rel="noopener noreferrer"><code>https://localhost:8443</code></a> 访问 Web UI（如果您编辑了 <code>.env</code> 文件中的端口，请使用相应的端口）。</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>HTTP（非 HTTPS）也可用（默认端口为 8000），但这主要用于反向代理设置；直接通过 HTTP 访问而非 HTTPS 会导致 WebRTC 错误，例如：</p><ul>
<li><em>无法访问您的麦克风/摄像头：因未知原因无法使用麦克风/摄像头。无法读取属性 &#x27;getUserMedia&#x27; 的值 &#x27;undefined&#x27;</em></li>
<li><em>navigator.mediaDevices 未定义</em></li>
</ul></div></div>
<p><strong>重要</strong>：当实际部署 Jitsi Meet 时，必须将 <code>PUBLIC_URL</code> 环境变量设置为您的真实域名（译者：这点非常重要！）。</p>
<p>如果您还想使用 jigasi，请首先在 <code>.env</code> 文件中配置 SIP 凭据，然后使用以下命令运行 Docker Compose：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> compose </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> docker-compose.yml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> jigasi.yml up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果您想启用文档共享功能（通过 <a href="https://github.com/ether/etherpad-lite" target="_blank" rel="noopener noreferrer">Etherpad</a>），请配置它并使用以下命令运行 Docker Compose：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> compose </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> docker-compose.yml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> etherpad.yml up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果您还想使用 jibri，请首先按照 Jitsi 广播基础设施配置部分的说明配置主机，然后使用以下命令运行 Docker Compose：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> compose </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> docker-compose.yml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> jibri.yml up </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>或者同时使用 jigasi：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> compose </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> docker-compose.yml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> jigasi.yml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> jibri.yml up </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>对于日志分析项目，您需要 <code>log-analyser.yml</code> 和 <code>grafana.yml</code> 文件。该项目允许您在 grafana 中分析 Docker 日志。如果您想运行日志分析器，请按以下命令运行 Docker 文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> docker-compose.yml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> log-analyser.yml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> grafana.yml up </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>有关日志分析的详细信息，请参阅 <a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-log-analyser" target="_blank" rel="noopener noreferrer">此文档</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="更新">更新<a href="#更新" class="hash-link" aria-label="Direct link to 更新" title="Direct link to 更新">​</a></h3>
<p>如果您想更新，只需再次运行以下命令：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$(</span><span class="token variable function" style="color:rgb(130, 170, 255)">curl</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable parameter variable" style="color:rgb(191, 199, 213)">-s</span><span class="token variable" style="color:rgb(191, 199, 213)"> https://api.github.com/repos/jitsi/docker-jitsi-meet/releases/latest </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable function" style="color:rgb(130, 170, 255)">grep</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable string" style="color:rgb(195, 232, 141)">&#x27;zip&#x27;</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable operator" style="color:rgb(137, 221, 255)">|</span><span class="token variable" style="color:rgb(191, 199, 213)"> </span><span class="token variable function" style="color:rgb(130, 170, 255)">cut</span><span class="token variable" style="color:rgb(191, 199, 213)"> -d</span><span class="token variable punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token variable" style="color:rgb(191, 199, 213)">&quot; </span><span class="token variable parameter variable" style="color:rgb(191, 199, 213)">-f4</span><span class="token variable" style="color:rgb(191, 199, 213)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>（就像最初下载 Jitsi 时一样）。然后解压并在被询问时选择覆盖所有文件：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">unzip</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">filename</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="测试开发不稳定版本构建">测试开发/不稳定版本构建<a href="#测试开发不稳定版本构建" class="hash-link" aria-label="Direct link to 测试开发/不稳定版本构建" title="Direct link to 测试开发/不稳定版本构建">​</a></h3>
<p>下载最新代码：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/jitsi/docker-jitsi-meet </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> docker-jitsi-meet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p><code>master</code> 分支的代码设计为与不稳定镜像一起使用。请勿与发行版镜像一起运行。</p></div></div>
<p>按照正常方式运行 <code>docker compose up</code>。</p>
<p>每天都会上传一个新的“不稳定”镜像构建版本。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="构建您自己的镜像">构建您自己的镜像<a href="#构建您自己的镜像" class="hash-link" aria-label="Direct link to 构建您自己的镜像" title="Direct link to 构建您自己的镜像">​</a></h3>
<p>下载最新代码：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/jitsi/docker-jitsi-meet </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> docker-jitsi-meet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>提供的 <code>Makefile</code> 提供了一种全面的方式来构建整个堆栈或单个镜像。</p>
<p>要构建所有镜像：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>要构建特定的镜像（例如，Web 镜像）：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> build_web</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>一旦您的本地构建完成，请确保将 <code>JITSI_IMAGE_VERSION=latest</code> 添加到您的 <code>.env</code> 文件中。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="安全提示">安全提示<a href="#安全提示" class="hash-link" aria-label="Direct link to 安全提示" title="Direct link to 安全提示">​</a></h3>
<p>此设置曾经为跨组件使用的内部账户提供默认密码。为了使默认设置安全，默认密码已被删除，相应的容器在没有设置密码的情况下不会启动。</p>
<p>可以通过以下方式生成强密码：<code>./gen-passwords.sh</code><br>
<!-- -->这将修改您的 <code>.env</code> 文件（会保存一份备份到 <code>.env.bak</code> 中），并为每个必需选项设置强密码。密码使用 <code>openssl rand -hex 16</code> 生成。</p>
<p><strong>请勿重用任何密码。</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="架构">架构<a href="#架构" class="hash-link" aria-label="Direct link to 架构" title="Direct link to 架构">​</a></h2>
<p>Jitsi Meet 的安装可以分为以下组件：</p>
<ul>
<li>Web 界面</li>
<li>XMPP 服务器</li>
<li>会议焦点组件</li>
<li>视频路由器（可以有多个）</li>
<li>音频通话的 SIP 网关</li>
<li>用于录制或流式传输会议的广播基础设施</li>
</ul>
<p><img decoding="async" loading="lazy" src="/handbook/assets/images/docker-jitsi-meet-319b2b6f7f575a4a6d2e9b51b84419c4.png" width="882" height="505" class="img_ev3q"></p>
<p>该图显示了在运行 Docker 的主机上的典型部署。此项目将上述每个组件分隔到相互连接的容器中。为此，提供了多个容器镜像。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="外部端口">外部端口<a href="#外部端口" class="hash-link" aria-label="Direct link to 外部端口" title="Direct link to 外部端口">​</a></h3>
<p>以下外部端口必须在防火墙上打开：</p>
<ul>
<li><code>80/tcp</code> 用于 Web UI HTTP（实际上只是重定向，在 <code>.env</code> 文件中取消注释 <code>ENABLE_HTTP_REDIRECT=1</code> 后）</li>
<li><code>443/tcp</code> 用于 Web UI HTTPS</li>
<li><code>10000/udp</code> 用于 UDP 的 RTP 媒体</li>
</ul>
<p>另外 <code>20000-20050/udp</code> 用于 jigasi，如果您选择部署该组件以方便 SIP 访问。</p>
<p>例如，在 CentOS/Fedora 服务器上，可以通过以下方式打开这些端口（不包括 SIP 访问）：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> firewall-cmd </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--permanent</span><span class="token plain"> --add-port</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain">/tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> firewall-cmd </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--permanent</span><span class="token plain"> --add-port</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">443</span><span class="token plain">/tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> firewall-cmd </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--permanent</span><span class="token plain"> --add-port</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10000</span><span class="token plain">/udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> firewall-cmd </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>请参阅 <a href="https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-quickstart#setup-and-configure-your-firewall" target="_blank" rel="noopener noreferrer">Debian/Ubuntu 安装指南中的相关部分</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="镜像">镜像<a href="#镜像" class="hash-link" aria-label="Direct link to 镜像" title="Direct link to 镜像">​</a></h3>
<ul>
<li><strong>base</strong>: Debian 稳定基础镜像，带有用于进程控制的 <a href="https://github.com/just-containers/s6-overlay" target="_blank" rel="noopener noreferrer">S6 Overlay</a> 和启用的 [Jitsi 仓库]。所有其他镜像都基于此镜像。</li>
<li><strong>base-java</strong>: 与上述相同，另加 Java（OpenJDK）。</li>
<li><strong>web</strong>: Jitsi Meet Web UI，通过 nginx 提供服务。</li>
<li><strong>prosody</strong>: <a href="https://prosody.im/" target="_blank" rel="noopener noreferrer">Prosody</a>，XMPP 服务器。</li>
<li><strong>jicofo</strong>: <a href="https://github.com/jitsi/jicofo" target="_blank" rel="noopener noreferrer">Jicofo</a>，XMPP 焦点组件。</li>
<li><strong>jvb</strong>: <a href="https://github.com/jitsi/jitsi-videobridge" target="_blank" rel="noopener noreferrer">Jitsi Videobridge</a>，视频路由器。</li>
<li><strong>jigasi</strong>: <a href="https://github.com/jitsi/jigasi" target="_blank" rel="noopener noreferrer">Jigasi</a>，SIP（仅音频）网关。</li>
<li><strong>jibri</strong>: <a href="https://github.com/jitsi/jibri" target="_blank" rel="noopener noreferrer">Jibri</a>，广播基础设施。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="设计考虑">设计考虑<a href="#设计考虑" class="hash-link" aria-label="Direct link to 设计考虑" title="Direct link to 设计考虑">​</a></h3>
<p>Jitsi Meet 使用 XMPP 进行信令，因此需要 XMPP 服务器。由这些容器提供的设置不会将 XMPP 服务器暴露给外部世界。相反，它被完全封闭，XMPP 流量的路由仅发生在用户定义的网络中。</p>
<p>XMPP 服务器可以暴露给外部世界，但这超出了本项目的范围。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置">配置<a href="#配置" class="hash-link" aria-label="Direct link to 配置" title="Direct link to 配置">​</a></h2>
<p>配置通过包含在 <code>.env</code> 文件中的环境变量进行。您可以复制提供的 <code>env.example</code> 文件作为参考。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>CONFIG</code></td><td>存储所有配置的目录</td><td>/opt/jitsi-meet-cfg</td></tr><tr><td><code>TZ</code></td><td>系统时区</td><td>Europe/Amsterdam</td></tr><tr><td><code>HTTP_PORT</code></td><td>暴露的 HTTP 流量端口</td><td>8000</td></tr><tr><td><code>HTTPS_PORT</code></td><td>暴露的 HTTPS 流量端口</td><td>8443</td></tr><tr><td><code>JVB_ADVERTISE_IPS</code></td><td>Docker 主机的 IP 地址（用逗号分隔），适用于局域网环境</td><td>192.168.1.1</td></tr><tr><td><code>PUBLIC_URL</code></td><td>用于 web 服务的公共 URL</td><td><a href="https://meet.example.com" target="_blank" rel="noopener noreferrer">https://meet.example.com</a></td></tr></tbody></table>
<p>译者：大陆用户时区可以设置为：Asia/Shanghai</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>移动端应用程序不支持自签名证书（默认情况下）。请参阅下文了解如何使用 Let’s Encrypt 获得正确的证书。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tls-配置">TLS 配置<a href="#tls-配置" class="hash-link" aria-label="Direct link to TLS 配置" title="Direct link to TLS 配置">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lets-encrypt-配置">Let&#x27;s Encrypt 配置<a href="#lets-encrypt-配置" class="hash-link" aria-label="Direct link to Let&#x27;s Encrypt 配置" title="Direct link to Let&#x27;s Encrypt 配置">​</a></h4>
<p>如果您希望将 Jitsi Meet 实例直接暴露给外部流量，但没有有效的 TLS 证书，幸运的是，Jitsi 已内置了对 Let’s Encrypt 的支持。以下是所需的选项：</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>ENABLE_LETSENCRYPT</code></td><td>启用 Let’s Encrypt 证书生成</td><td>1</td></tr><tr><td><code>LETSENCRYPT_DOMAIN</code></td><td>要为其生成证书的域名</td><td>meet.example.com</td></tr><tr><td><code>LETSENCRYPT_EMAIL</code></td><td>接收重要帐户通知的电子邮件地址（必填项）</td><td><a href="mailto:alice@atlanta.net" target="_blank" rel="noopener noreferrer">alice@atlanta.net</a></td></tr></tbody></table>
<p>此外，您需要将 <code>HTTP_PORT</code> 设置为 80，将 <code>HTTPS_PORT</code> 设置为 443，并将 <code>PUBLIC_URL</code> 设置为您的域名。您还可以考虑通过设置 <code>ENABLE_HTTP_REDIRECT=1</code> 来将 HTTP 流量重定向到 HTTPS。</p>
<p><strong>Let’s Encrypt 限制提醒</strong>：Let’s Encrypt 对您为同一域名提交新证书请求的次数有限制。当前的限制是每 7 天最多提交 5 个新证书请求。因此，如果您打算删除 <code>.jitsi-meet-cfg</code> 文件夹，建议您禁用 <code>.env</code> 中的 Let’s Encrypt 相关环境变量。或者，您可以将 <code>.jitsi-meet-cfg</code> 文件夹移动到其他位置，以便安全地保留已经颁发的证书。或者，您可以先禁用 Let’s Encrypt 进行初步测试，然后在测试完成后再启用 Let’s Encrypt。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>当您不再使用 <code>LETSENCRYPT_USE_STAGING</code> 时，必须手动清除 <code>.jitsi-meet-cfg/web</code> 中的证书。</p></div></div>
<p>有关 Let’s Encrypt 限制的更多信息，请访问：
<a href="https://letsencrypt.org/docs/rate-limits/" target="_blank" rel="noopener noreferrer">https://letsencrypt.org/docs/rate-limits/</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用现有的-tls-证书和密钥">使用现有的 TLS 证书和密钥<a href="#使用现有的-tls-证书和密钥" class="hash-link" aria-label="Direct link to 使用现有的 TLS 证书和密钥" title="Direct link to 使用现有的 TLS 证书和密钥">​</a></h4>
<p>如果您拥有有效的 TLS 证书并且不需要使用 Let’s Encrypt 证书，您可以配置 Jitsi Meet 容器来使用它。</p>
<p>与 Let’s Encrypt 证书不同，此操作不是通过 <code>.env</code> 文件配置的，而是通过告知 Jitsi Meet 的 <code>web</code> 服务挂载以下两个卷：</p>
<ul>
<li>将 <code>/path/to/your/cert.key</code> 文件挂载到 <code>/config/keys/cert.key</code> 挂载点</li>
<li>将 <code>/path/to/your/cert.fullchain</code> 文件挂载到 <code>/config/keys/cert.crt</code> 挂载点</li>
</ul>
<p>在 <code>docker-compose.yml</code> 文件中的配置如下：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> /path/to/your/cert.fullchain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/config/keys/cert.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> /path/to/your/cert.key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/config/keys/cert.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能配置configjs">功能配置（config.js）<a href="#功能配置configjs" class="hash-link" aria-label="Direct link to 功能配置（config.js）" title="Direct link to 功能配置（config.js）">​</a></h3>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>TOOLBAR_BUTTONS</code></td><td>配置工具栏按钮。按钮名称以逗号分隔（逗号之间无空格）</td><td></td></tr><tr><td><code>HIDE_PREMEETING_BUTTONS</code></td><td>隐藏会前屏幕上的按钮。按钮名称以逗号分隔</td><td></td></tr><tr><td><code>ENABLE_LOBBY</code></td><td>控制是否启用大厅功能</td><td>1</td></tr><tr><td><code>ENABLE_AV_MODERATION</code></td><td>控制是否启用音视频管理功能</td><td>1</td></tr><tr><td><code>ENABLE_PREJOIN_PAGE</code></td><td>进入会议前显示预加入页面</td><td>1</td></tr><tr><td><code>ENABLE_WELCOME_PAGE</code></td><td>启用欢迎页面</td><td>1</td></tr><tr><td><code>ENABLE_CLOSE_PAGE</code></td><td>启用关闭页面</td><td>0</td></tr><tr><td><code>DISABLE_AUDIO_LEVELS</code></td><td>禁用音频级别测量</td><td>0</td></tr><tr><td><code>ENABLE_NOISY_MIC_DETECTION</code></td><td>启用噪音麦克风检测</td><td>1</td></tr><tr><td><code>ENABLE_BREAKOUT_ROOMS</code></td><td>启用分组讨论室</td><td>1</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jigasi-sip-网关仅音频配置">Jigasi SIP 网关（仅音频）配置<a href="#jigasi-sip-网关仅音频配  置" class="hash-link" aria-label="Direct link to Jigasi SIP 网关（仅音频）配置" title="Direct link to Jigasi SIP 网关（仅音频）配置">​</a></h3>
<p>如果您希望启用 SIP 网关，以下选项是必需的：</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>JIGASI_SIP_URI</code></td><td>用于来电/去电的 SIP URI</td><td><a href="mailto:test@sip2sip.info" target="_blank" rel="noopener noreferrer">test@sip2sip.info</a></td></tr><tr><td><code>JIGASI_SIP_PASSWORD</code></td><td>指定 SIP 账号的密码</td><td><code>&lt;unset&gt;</code></td></tr><tr><td><code>JIGASI_SIP_SERVER</code></td><td>SIP 服务器（不确定时可使用 SIP 账号的域名）</td><td>sip2sip.info</td></tr><tr><td><code>JIGASI_SIP_PORT</code></td><td>SIP 服务器端口</td><td>5060</td></tr><tr><td><code>JIGASI_SIP_TRANSPORT</code></td><td>SIP 传输协议</td><td>UDP</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="显示拨入信息">显示拨入信息<a href="#显示拨入信息" class="hash-link" aria-label="Direct link to 显示拨入信息" title="Direct link to 显示拨入信息">​</a></h4>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>DIALIN_NUMBERS_URL</code></td><td>包含所有拨入号码的 JSON 文件 URL</td><td><a href="https://meet.example.com/dialin.json" target="_blank" rel="noopener noreferrer">https://meet.example.com/dialin.json</a></td></tr><tr><td><code>CONFCODE_URL</code></td><td>用于检查/生成拨入代码的 API URL</td><td><a href="https://jitsi-api.jitsi.net/conferenceMapper" target="_blank" rel="noopener noreferrer">https://jitsi-api.jitsi.net/conferenceMapper</a></td></tr></tbody></table>
<p>拨入号码的 JSON 文件应类似如下：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Dial-In numbers:&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token property">&quot;numbers&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;DE&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;+49-721-0000-0000&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token property">&quot;numbersEnabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-jibri-进行录制直播配置">使用 Jibri 进行录制/直播配置<a href="#使用-jibri-进行录制直播配置" class="hash-link" aria-label="Direct link to 使用 Jibri 进行录制/直播配置" title="Direct link to 使用 Jibri 进行录制/直播配置">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"><p></p><summary>如果您使用的版本低于 7439，则需要一些额外的设置。</summary>
在运行 <strong>版本低于 7439</strong> 的 Jibri 之前，您需要在主机上设置 ALSA 循环设备。这 <strong>不</strong> 适用于非 Linux 主机。<p></p><p>对于 CentOS 7，模块已经与内核一起编译，因此只需因此只需运行：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 配置 5 个捕获/播放接口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;options snd-aloop enable=1,1,1,1,1 index=0,1,2,3,4&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /etc/modprobe.d/alsa-loopback.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 设置模块自动加载</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;snd_aloop&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /etc/modules-load.d/snd_aloop.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 加载模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">modprobe snd-aloop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 检查模块是否已加载</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lsmod </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> snd_aloop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对于 Ubuntu：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 安装模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> update </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> linux-image-extra-virtual</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 配置 5 个捕获/播放接口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;options snd-aloop enable=1,1,1,1,1 index=0,1,2,3,4&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /etc/modprobe.d/alsa-loopback.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 设置模块自动加载</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;snd-aloop&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token plain"> /etc/modules</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 检查模块是否已加载</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lsmod </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> snd_aloop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>如果您在 AWS 上运行，可能需要重启机器以使用通用内核，而不是 “aws” 内核。如果重启后机器仍在使用 “aws” 内核，您需要手动更新 grub 文件。操作如下：</p></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 用编辑器打开 grub 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">nano</span><span class="token plain"> /etc/default/grub</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 将 GRUB_DEFAULT 的值从 &quot;0&quot; 修改为 &quot;1&gt;2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 保存并退出文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 更新 grub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">update-grub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 重启机器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">reboot</span><span class="token plain"> now</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对于多实例 Jibri，您需要为每个实例手动选择不同的循环设备。</p><p>默认情况下，第一个实例的 <code>.asoundrc</code> 文件如下：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback,0,0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback,0,1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback,1,1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback,1,0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>要设置第二个实例，运行容器时更改 <code>/home/jibri/.asoundrc</code> 文件：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback_1,0,0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback_1,0,1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback_1,1,1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:Loopback_1,1,0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>您还可以使用编号 id 设置循环设备。第三个实例的 <code>.asoundrc</code> 文件应如下：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:2,0,0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:2,0,1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:2,1,1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slave.pcm &quot;hw:2,1,0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>如果您想启用 Jibri，以下选项是必需的：</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>ENABLE_RECORDING</code></td><td>启用录制/直播</td><td>1</td></tr></tbody></table>
<p>Jibri 扩展配置：</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>JIBRI_RECORDER_USER</code></td><td>Jibri 客户端连 接的内部录制用户</td><td>recorder</td></tr><tr><td><code>JIBRI_RECORDER_PASSWORD</code></td><td>Jibri 客户端连接的内部录制密码</td><td><code>&lt;unset&gt;</code></td></tr><tr><td><code>JIBRI_RECORDING_DIR</code></td><td>Jibri 容器内的录制目录</td><td>/config/recordings</td></tr><tr><td><code>JIBRI_FINALIZE_RECORDING_SCRIPT_PATH</code></td><td>完成录制后的脚本路径，将在录制完成后运行</td><td>/config/finalize.sh</td></tr><tr><td><code>JIBRI_XMPP_USER</code></td><td>Jibri 客户端连接的内部用户</td><td>jibri</td></tr><tr><td><code>JIBRI_STRIP_DOMAIN_JID</code></td><td>Jibri 内的域名前缀剥离（详情请参阅 env.example 文件）</td><td>muc</td></tr><tr><td><code>JIBRI_BREWERY_MUC</code></td><td>Jibri 池的 MUC 名称</td><td>jibribrewery</td></tr><tr><td><code>JIBRI_PENDING_TIMEOUT</code></td><td>MUC 连接超时时间</td><td>90</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jitsi-meet-配置">Jitsi Meet 配置<a href="#jitsi-meet-配置" class="hash-link" aria-label="Direct link to Jitsi Meet 配置" title="Direct link to Jitsi Meet 配置">​</a></h3>
<p>Jitsi Meet 使用两个配置文件来更改 Web 界面的默认设置：<code>config.js</code> 和 <code>interface_config.js</code>。这些文件位于您环境文件中配置的 <code>CONFIG/web/</code> 目录中。</p>
<p>每次容器重启时，这些文件都会重新创建。如果您想提供自己的设置，创建自己的配置文件 <code>custom-config.js</code> 和 <code>custom-interface_config.js</code> 即可。</p>
<p>您只需提供相关设置，Docker 脚本会将您的自定义文件附加到默认文件中！</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="身份验证">身份验证<a href="#身份验证" class="hash-link" aria-label="Direct link to 身份验证" title="Direct link to 身份验证">​</a></h3>
<p>身份验证可以通过以下环境变量进行控制。如果启用了访客访问，未经身份验证的用户需要等待 已认证用户加入后才能进入房间。如果未启用访客访问，每个用户都需要认证后才能加入。</p>
<p>如果启用了身份验证，一旦认证用户登录，该用户将在会话超时前始终保持登录状态。您可以通过设置 <code>ENABLE_AUTO_LOGIN=0</code> 来禁用默认的自动登录功能，或者设置 <code>JICOFO_AUTH_LIFETIME</code> 来限制会话时长。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>ENABLE_AUTH</code></td><td>启用身份验证</td><td>1</td></tr><tr><td><code>ENABLE_GUESTS</code></td><td>启用访客访问</td><td>1</td></tr><tr><td><code>AUTH_TYPE</code></td><td>选择身份验证类型（internal、jwt 或 ldap）</td><td>internal</td></tr><tr><td><code>ENABLE_AUTO_LOGIN</code></td><td>启用自动登录</td><td>1</td></tr><tr><td><code>JICOFO_AUTH_LIFETIME</code></td><td>选择认证用户的会话超时值</td><td>3 hours</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="内部身份验证">内部身份验证<a href="#内部身份验证" class="hash-link" aria-label="Direct link to 内部身份验证" title="Direct link to 内部身份验证">​</a></h4>
<p>默认的身份验证模式是 <code>internal</code>，使用 XMPP 凭据认证用户。要启用此功能，需设置 <code>ENABLE_AUTH</code> 为 1，并将 <code>AUTH_TYPE</code> 设置为 <code>internal</code>，然后配置以下设置。</p>
<p>内部用户必须通过 <code>prosodyctl</code> 工具在 <code>prosody</code> 容器中创建。首先，进入对应的容器：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> compose </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exec</span><span class="token plain"> prosody /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>进入容器后，运行以下命令创建用户：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">prosodyctl </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--config</span><span class="token plain"> /config/prosody.cfg.lua register 【TheDesiredUsername】 meet.jitsi 【TheDesiredPassword】</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意，命令不会产生任何输出。</p>
<p>要删除用户，请运行以下命令：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">prosodyctl </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--config</span><span class="token plain"> /config/prosody.cfg.lua unregister 【TheDesiredUsername】 meet.jitsi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>要列出所有用户，运行以下命令：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">find</span><span class="token plain"> /config/data/meet%2ejitsi/accounts </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-type</span><span class="token plain"> f </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-exec</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">basename</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> .dat </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-ldap-进行身份验证">使用 LDAP 进行身份验证<a href="#使用-ldap-进行身份验证" class="hash-link" aria-label="Direct link to 使用 LDAP 进行身份验证" title="Direct link to 使用 LDAP 进行身份验证">​</a></h4>
<p>您可以使用 LDAP 进行用户认证。要启用此功能，需设置 <code>ENABLE_AUTH</code> 为 1，并将 <code>AUTH_TYPE</code> 设置为 <code>ldap</code>，然后配置以下设置。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>LDAP_URL</code></td><td>LDAP 连接的 URL</td><td>ldaps://ldap.domain.com/</td></tr><tr><td><code>LDAP_BASE</code></td><td>LDAP 基础 DN，可为空</td><td>DC=example,DC=domain,DC=com</td></tr><tr><td><code>LDAP_BINDDN</code></td><td>LDAP 用户 DN，  不指定此参数则使用匿名绑定</td><td>CN=binduser,OU=users,DC=example,DC=domain,DC=com</td></tr><tr><td><code>LDAP_BINDPW</code></td><td>LDAP 用户密码，不指定此参数则使用匿名绑定</td><td>LdapUserPassw0rd</td></tr><tr><td><code>LDAP_FILTER</code></td><td>LDAP 过滤器</td><td>(sAMAccountName=%u)</td></tr><tr><td><code>LDAP_AUTH_METHOD</code></td><td>LDAP 认证方法</td><td>bind</td></tr><tr><td><code>LDAP_VERSION</code></td><td>LDAP 协议版本</td><td>3</td></tr><tr><td><code>LDAP_USE_TLS</code></td><td>启用 LDAP TLS</td><td>1</td></tr><tr><td><code>LDAP_TLS_CIPHERS</code></td><td>设置允许的 TLS 密码列表</td><td>SECURE256<!-- -->:SECURE128</td></tr><tr><td><code>LDAP_TLS_CHECK_PEER</code></td><td>要求并验证 LDAP 服务器证书</td><td>1</td></tr><tr><td><code>LDAP_TLS_CACERT_FILE</code></td><td>CA 证书文件路径，启用服务器证书验证时使用</td><td>/etc/ssl/certs/ca-certificates.crt</td></tr><tr><td><code>LDAP_TLS_CACERT_DIR</code></td><td>CA 证书目录路径，启用服务器证书验证时使用</td><td>/etc/ssl/certs</td></tr><tr><td><code>LDAP_START_TLS</code></td><td>启用 START_TLS，需 LDAPv3，URL 必须为 ldap:// 而非 ldaps://</td><td>0</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-jwt-令牌进行身份验证">使用 JWT 令牌进行身份验证<a href="#使用-jwt-令牌进行身份验证" class="hash-link" aria-label="Direct link to 使用 JWT 令牌进行身份验证" title="Direct link to 使用 JWT 令牌进行身份验证">​</a></h4>
<p>您可以使用 JWT 令牌认证用户。要启用此功能，需设置 <code>ENABLE_AUTH</code> 为 1，并将 <code>AUTH_TYPE</code> 设置为 <code>jwt</code>，然后配置以下设置。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>JWT_APP_ID</code></td><td>应用标识符</td><td>my_jitsi_app_id</td></tr><tr><td><code>JWT_APP_SECRET</code></td><td>仅您的令牌知道的应用密钥</td><td>my_jitsi_app_secret</td></tr><tr><td><code>JWT_ACCEPTED_ISSUERS</code></td><td>（可选）设置 asap_accepted_issuers 为逗号分隔列表</td><td>my_web_client,my_app_client</td></tr><tr><td><code>JWT_ACCEPTED_AUDIENCES</code></td><td>（可选）设置 asap_accepted_audiences 为逗号分隔列表</td><td>my_server1,my_server2</td></tr><tr><td><code>JWT_ASAP_KEYSERVER</code></td><td>（可选）设置 asap_keyserver 为一个可用于查找公钥的 URL</td><td><a href="https://example.com/asap%3E" target="_blank" rel="noopener noreferrer">https://example.com/asap&gt;</a></td></tr><tr><td><code>JWT_ALLOW_EMPTY</code></td><td>（可选）允许没有 JWT 的匿名用户，同时验证提供的 JWT</td><td>0</td></tr><tr><td><code>JWT_AUTH_TYPE</code></td><td>（可选）控制用于处理传入 JWT 的模块</td><td>token</td></tr><tr><td><code>JWT_TOKEN_AUTH_MODULE</code></td><td>（可选）控制用于验证 JWT 的模块</td><td>token_verification</td></tr></tbody></table>
<p>可以使用 <a href="https://jwt.io/#debugger-io" target="_blank" rel="noopener noreferrer">jwt.io</a> 调试器进行测试。使用以下示例 payload：</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;context&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;user&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;avatar&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://robohash.org/john-doe&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;John Doe&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;email&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jdoe@example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;aud&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my_jitsi_app_id&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;iss&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my_jitsi_app_id&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;sub&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;meet.jitsi&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;room&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-matrix-进行身份验证">使用 Matrix 进行身份验证<a href="#使用-matrix-进行身份验证" class="hash-link" aria-label="Direct link to 使用 Matrix 进行身份验证" title="Direct link to 使用 Matrix 进行身份验证">​</a></h4>
<p>有关更多信息，请参阅 “Prosody Auth Matrix 用户验证” 的文档 <a href="https://github.com/matrix-org/prosody-mod-auth-matrix-user-verification" target="_blank" rel="noopener noreferrer">这里</a>。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>MATRIX_UVS_URL</code></td><td>Matrix 用户验证服务的基本 URL（不带斜杠）</td><td><code>https://uvs.example.com:3000</code></td></tr><tr><td><code>MATRIX_UVS_ISSUER</code></td><td>（可选）通过的 auth token 的发行者，必须与 JWT 中的 <code>iss</code> 匹配</td><td>issuer（默认）</td></tr><tr><td><code>MATRIX_UVS_AUTH_TOKEN</code></td><td>（可选）如果启用了身份验证，则为用户验证服务的 auth token</td><td>changeme</td></tr><tr><td><code>MATRIX_UVS_SYNC_POWER_LEVELS</code></td><td>（可选）使 Matrix 房间的主持人成为 Prosody 房间的拥有者</td><td>1</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用混合-matrix-令牌hybrid-matrix-token进行身份验证">使用混合 Matrix 令牌（Hybrid Matrix Token）进行身份验证<a href="#使用混合-matrix-令牌hybrid-matrix-token进行身份验证" class="hash-link" aria-label="Direct link to 使用混合 Matrix 令牌（Hybrid Matrix Token）进行身份验证" title="Direct link to 使用混合 Matrix 令牌（Hybrid Matrix Token）进行身份验证">​</a></h4>
<p>您可以使用 <code>Hybrid Matrix Token</code> 认证用户。它支持在同一设置中使用 <code>Matrix</code> 和 <code>JWT Token</code> 进行身份验证。要启用此功能，需设置 <code>ENABLE_AUTH</code> 为 1，并将 <code>AUTH_TYPE</code> 设置为 <code>hybrid_matrix_token</code>，然后配置以下设置。</p>
<p>有关更多信息，请参阅 “Hybrid Matrix Token” 的文档 <a href="https://github.com/jitsi-contrib/prosody-plugins/tree/main/auth_hybrid_matrix_token" target="_blank" rel="noopener noreferrer">这里</a>。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>MATRIX_UVS_URL</code></td><td>Matrix 用户验证服务的基本 URL（不带斜杠）</td><td><code>https://uvs.example.com:3000</code></td></tr><tr><td><code>MATRIX_UVS_ISSUER</code></td><td>（可选）通过的 auth token 的发行者，必须与 JWT 中的 <code>iss</code> 匹配</td><td>my_issuer</td></tr><tr><td><code>MATRIX_UVS_AUTH_TOKEN</code></td><td>（可选）如果启用了身份验证，则为用户验证服务的 auth token</td><td>my_matrix_secret</td></tr><tr><td><code>MATRIX_UVS_SYNC_POWER_LEVELS</code></td><td>（可选）使 Matrix 房间的主持人成为 Prosody 房间的拥有者</td><td>1</td></tr><tr><td><code>MATRIX_LOBBY_BYPASS</code></td><td>（可选）允许 Matrix 房间成员绕过 Jitsi 大厅检查</td><td>1</td></tr><tr><td><code>JWT_APP_ID</code></td><td>应用标识符</td><td>my_jitsi_app_id</td></tr><tr><td><code>JWT_APP_SECRET</code></td><td>仅您的令牌知道的应用密钥</td><td>my_jitsi_app_secret</td></tr><tr><td><code>JWT_ALLOW_EMPTY</code></td><td>（可选）允许没有 JWT 的匿名用户，同时验证提供的 JWT</td><td>0</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="外部身份验证">外部身  份验证<a href="#外部身份验证" class="hash-link" aria-label="Direct link to 外部身份验证" title="Direct link to 外部身份验证">​</a></h4>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>TOKEN_AUTH_URL</code></td><td>使用外部服务进行身份验证或专注于已存在的外部认证窗口</td><td><a href="https://auth.meet.example.com/%7Broom%7D%3E" target="_blank" rel="noopener noreferrer">https://auth.meet.example.com/{room}&gt;</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-etherpad-进行文档协作编辑">使用 Etherpad 进行文档协作编辑<a href="#使用-etherpad-进行文档协作编辑" class="hash-link" aria-label="Direct link to 使用 Etherpad 进行文档协作编辑" title="Direct link to 使用 Etherpad 进行文档协作编辑">​</a></h3>
<p>您可以通过 <a href="https://github.com/ether/etherpad-lite" target="_blank" rel="noopener noreferrer">Etherpad</a> 进行协作编辑文档。要启用它，请设置以下配置选项，并使用额外的配置文件 <code>etherpad.yml</code> 运行 Docker Compose。</p>
<p>以下是所需选项：</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>ETHERPAD_URL_BASE</code></td><td>设置 etherpad-lite 的 URL</td><td><code>http://etherpad.meet.jitsi:9001</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="转录功能配置">转录功能配置<a href="#转录功能配置" class="hash-link" aria-label="Direct link to 转录功能配置" title="Direct link to 转录功能配置">​</a></h3>
<p>如果您想启用转录功能，需要以下选项：</p>
<table><thead><tr><th>变量</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>ENABLE_TRANSCRIPTIONS</code></td><td>启用会议中的 Jigasi 转录功能</td><td>1</td></tr><tr><td><code>GC_PROJECT_ID</code></td><td>来自 Google Cloud 凭据的 <code>project_id</code></td><td></td></tr><tr><td><code>GC_PRIVATE_KEY_ID</code></td><td>来自 Google Cloud 凭据的 <code>private_key_id</code></td><td></td></tr><tr><td><code>GC_PRIVATE_KEY</code></td><td>来自 Google Cloud 凭据的 <code>private_key</code></td><td></td></tr><tr><td><code>GC_CLIENT_EMAIL</code></td><td>来自 Google Cloud 凭据的 <code>client_email</code></td><td></td></tr><tr><td><code>GC_CLIENT_ID</code></td><td>来自 Google Cloud 凭据的 <code>client_id</code></td><td></td></tr><tr><td><code>GC_CLIENT_CERT_URL</code></td><td>来自 Google Cloud 凭据的 <code>client_x509_cert_url</code></td><td></td></tr><tr><td><code>JIGASI_TRANSCRIBER_RECORD_AUDIO</code></td><td>当转录器开启时，Jigasi 会录制音频</td><td>true</td></tr><tr><td><code>JIGASI_TRANSCRIBER_SEND_TXT</code></td><td>当转录器开启时，Jigasi 会将转录文本发送到聊天</td><td>true</td></tr><tr><td><code>JIGASI_TRANSCRIBER_ADVERTISE_URL</code></td><td>Jigasi 会将转录文件的链接发布到聊天</td><td>true</td></tr></tbody></table>
<p>有关设置 Google Cloud 凭据的详细信息，请参阅 <a href="https://cloud.google.com/text-to-speech/docs/quickstart-protocol%3E" target="_blank" rel="noopener noreferrer">https://cloud.google.com/text-to-speech/docs/quickstart-protocol&gt;</a> 中的 &quot;Before you begin&quot; 部分的第 1 到 5 段。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sentry-日志配置">Sentry 日志配置<a href="#sentry-日志配置" class="hash-link" aria-label="Direct link to Sentry 日志配置" title="Direct link to Sentry 日志配置">​</a></h3>
<table><thead><tr><th>变量</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>JVB_SENTRY_DSN</code></td><td>Sentry 数据源名称（Sentry 项目的端点）</td><td><code>https://public:private@host:port/1</code></td></tr><tr><td><code>JICOFO_SENTRY_DSN</code></td><td>Sentry 数据源名称（Sentry 项目的端点）</td><td><code>https://public:private@host:port/1</code></td></tr><tr><td><code>JIGASI_SENTRY_DSN</code></td><td>Sentry 数据源名称（Sentry 项目的端点）</td><td><code>https://public:private@host:port/1</code></td></tr><tr><td><code>SENTRY_ENVIRONMENT</code></td><td>可选的环境信息，用于过滤事件</td><td>production</td></tr><tr><td><code>SENTRY_RELEASE</code></td><td>可选的版本信息，用于过滤事件</td><td>1.0.0</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="turn-服务器配置">TURN 服务器配置<a href="#turn-服务器配置" class="hash-link" aria-label="Direct link to TURN 服务器配置" title="Direct link to TURN 服务器配置">​</a></h3>
<p>配置外部 TURN 服务器。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>TURN_CREDENTIALS</code></td><td>TURN 服务器的凭据</td><td></td></tr><tr><td><code>TURN_HOST</code></td><td>TURN 服务器主机名，使用逗号分隔的列表（UDP 或 TCP 传输）</td><td></td></tr><tr><td><code>TURN_PORT</code></td><td>TURN 服务器端口（UDP 或 TCP 传输）</td><td>443</td></tr><tr><td><code>TURN_TRANSPORT</code></td><td>TURN 服务器协议，使用逗号分隔的列表（UDP 或 TCP 或两者）</td><td>tcp</td></tr><tr><td><code>TURNS_HOST</code></td><td>TURN 服务器主机名，使用逗号分隔的列表（TLS 传输）</td><td></td></tr><tr><td><code>TURNS_PORT</code></td><td>TURN 服务器端口（TLS 传输）</td><td>443</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="高级配置">高级配置<a href="#高级配置" class="hash-link" aria-label="Direct link to 高级配置" title="Direct link to 高级配置">​</a></h3>
<p>这些配置选项已预设，通常无需更改。</p>
<table><thead><tr><th>变量</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>XMPP_DOMAIN</code></td><td>内部 XMPP 域</td><td>meet.jitsi</td></tr><tr><td><code>XMPP_AUTH_DOMAIN</code></td><td>认证服务的内部 XMPP 域</td><td>auth.meet.jitsi</td></tr><tr><td><code>XMPP_SERVER</code></td><td>内部 XMPP 服务器名称 xmpp.meet.jitsi</td><td>xmpp.meet.jitsi</td></tr><tr><td><code>XMPP_BOSH_URL_BASE</code></td><td>BOSH 模块的内部 XMPP 服务器 URL</td><td><code>http://xmpp.meet.jitsi:5280</code></td></tr><tr><td><code>XMPP_MUC_DOMAIN</code></td><td>MUC 的 XMPP 域</td><td>muc.meet.jitsi</td></tr><tr><td><code>XMPP_INTERNAL_MUC_DOMAIN</code></td><td>内部 MUC 的 XMPP 域</td><td>internal-muc.meet.jitsi</td></tr><tr><td><code>XMPP_GUEST_DOMAIN</code></td><td>未认证用户的 XMPP 域</td><td>guest.meet.jitsi</td></tr><tr><td><code>XMPP_RECORDER_DOMAIN</code></td><td>jibri 录制器的域</td><td>recorder.meet.jitsi</td></tr><tr><td><code>XMPP_MODULES</code></td><td>XMPP_DOMAIN 的自定义 Prosody 模块（逗号分隔）</td><td>info,alert</td></tr><tr><td><code>XMPP_MUC_MODULES</code></td><td>MUC 组件的自定义 Prosody 模块（逗号分隔）</td><td>info,alert</td></tr><tr><td><code>XMPP_INTERNAL_MUC_MODULES</code></td><td>内部 MUC 组件的自定义 Prosody 模块（逗号分隔）</td><td>info,alert</td></tr><tr><td><code>GLOBAL_MODULES</code></td><td>自定义的 prosody 模块，在全局配置中加载（逗号分隔）</td><td>statistics,alert</td></tr><tr><td><code>GLOBAL_CONFIG</code></td><td>具有转义换行符的自定义配置字符串</td><td>foo = bar;\nkey = val;</td></tr><tr><td><code>RESTART_POLICY</code></td><td>容器重启策略</td><td>默认值为 <code>unless-stopped</code></td></tr><tr><td><code>DISABLE_HTTPS</code></td><td>处理此设置之外的 TLS 连接</td><td>0</td></tr><tr><td><code>ENABLE_HTTP_REDIRECT</code></td><td>将 HTTP 流量重定向到 HTTPS</td><td>0</td></tr><tr><td><code>LOG_LEVEL</code></td><td>控制 prosody 和相关模块输出的日志级别</td><td>info</td></tr><tr><td><code>ENABLE_HSTS</code></td><td>发送 <code>strict-transport-security</code> 头以强制浏览器使用安全和受信任的连接。建议在生产环境中使用。</td><td>1</td></tr><tr><td><code>ENABLE_IPV6</code></td><td>提供在不支持 IPv6 的环境中禁 用 IPv6 的方式</td><td>1</td></tr><tr><td><code>ENABLE_COLIBRI_WEBSOCKET_UNSAFE_REGEX</code></td><td>启用旧版不安全的正则表达式，用于 JVB colibri-ws URL。警告：谨慎启用，此正则表达式允许连接任意内部 IP 地址，不建议在生产环境中使用。不安全的正则表达式定义为</td><td>0</td></tr><tr><td><code>COLIBRI_WEBSOCKET_JVB_LOOKUP_NAME</code></td><td>查找 JVB IP 地址的 DNS 名称，用于 <code>COLIBRI_WEBSOCKET_REGEX</code> 的默认值</td><td>jvb</td></tr><tr><td><code>COLIBRI_WEBSOCKET_REGEX</code></td><td>重写用于代理到 JVB 的 colibri 正则表达式。建议在生产中用匹配可能 JVB IP 范围的值覆盖</td><td>默认是 <code>dig $COLIBRI_WEBSOCKET_JVB_LOOKUP_NAME</code> 除非 <code>DISABLE_COLIBRI_WEBSOCKET_JVB_LOOKUP</code> 被设置为 true</td></tr><tr><td><code>DISABLE_COLIBRI_WEBSOCKET_JVB_LOOKUP</code></td><td>控制在定义 <code>COLIBRI_WEBSOCKET_REGEX</code> 时是否运行 <code>dig $COLIBRI_WEBSOCKET_JVB_LOOKUP_NAME</code></td><td>0</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="高级-prosody-选项">高级 Prosody 选项<a href="#高级-prosody-选项" class="hash-link" aria-label="Direct link to 高级 Prosody 选项" title="Direct link to 高级 Prosody 选项">​</a></h4>
<table><thead><tr><th>变量</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>PROSODY_RESERVATION_ENABLED</code></td><td>启用 Prosody 的预留 REST API</td><td>false</td></tr><tr><td><code>PROSODY_RESERVATION_REST_BASE_URL</code></td><td>Prosody 的预留 REST API 的基本 URL</td><td></td></tr><tr><td><code>PROSODY_AUTH_TYPE</code></td><td>为 Prosody 选择认证类型（internal、jwt 或 ldap）</td><td><code>AUTH_TYPE</code></td></tr><tr><td><code>PROSODY_ENABLE_METRICS</code></td><td>启用 http_openmetrics 模块，在 <code>/metrics</code> 处公开 Prometheus 指标</td><td>false</td></tr><tr><td><code>PROSODY_METRICS_ALLOWED_CIDR</code></td><td>允许访问指标的 CIDR 块</td><td>172.16.0.0/12</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="高级-jicofo-选项">高级 Jicofo 选项<a href="#高级-jicofo-选项" class="hash-link" aria-label="Direct link to 高级 Jicofo 选项" title="Direct link to 高级 Jicofo 选项">​</a></h4>
<table><thead><tr><th>变量</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>JICOFO_COMPONENT_SECRET</code></td><td>Jicofo 的 XMPP 组件密码</td><td>s3cr37</td></tr><tr><td><code>JICOFO_AUTH_USER</code></td><td>Jicofo 客户端连接的 XMPP 用户</td><td>focus</td></tr><tr><td><code>JICOFO_AUTH_PASSWORD</code></td><td>Jicofo 客户端连接的 XMPP 密码</td><td><code>&lt;unset&gt;</code></td></tr><tr><td><code>JICOFO_ENABLE_AUTH</code></td><td>启用 Jicofo 的认证</td><td><code>ENABLE_AUTH</code></td></tr><tr><td><code>JICOFO_AUTH_TYPE</code></td><td>为 Jicofo 选择认证类型（internal、jwt 或 ldap）</td><td><code>AUTH_TYPE</code></td></tr><tr><td><code>JICOFO_AUTH_LIFETIME</code></td><td>选择经过身份验证的用户的会话超时值</td><td>24 hours</td></tr><tr><td><code>JICOFO_ENABLE_HEALTH_CHECKS</code></td><td>启用 Jicofo 内部健康检查，允许使用 REST API 检查 Jicofo 的状态</td><td>false</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="高级-jvb-选项">高级 JVB 选项<a href="#高级-jvb-选项" class="hash-link" aria-label="Direct link to 高级 JVB 选项" title="Direct link to 高级 JVB 选项">​</a></h4>
<table><thead><tr><th>变量</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>JVB_AUTH_USER</code></td><td>JVB MUC 客户端连接的 XMPP 用户</td><td>jvb</td></tr><tr><td><code>JVB_AUTH_PASSWORD</code></td><td>JVB MUC 客户端连接的 XMPP 密码</td><td><code>&lt;unset&gt;</code></td></tr><tr><td><code>JVB_STUN_SERVERS</code></td><td>用于发现服务器公共 IP 的 STUN 服务器</td><td>stun.l.google.com:19302, stun1.l.google.com:19302, stun2.l.google.com:19302</td></tr><tr><td><code>JVB_PORT</code></td><td>Jitsi Videobridge 使用的媒体 UDP 端口</td><td>10000</td></tr><tr><td><code>JVB_COLIBRI_PORT</code></td><td>JVB 暴露给本地主机的 COLIBRI REST API 端口</td><td>8080</td></tr><tr><td><code>JVB_BREWERY_MUC</code></td><td>JVB 池的 MUC 名称</td><td>jvbbrewery</td></tr><tr><td><code>COLIBRI_REST_ENABLED</code></td><td>启用 COLIBRI REST API</td><td>true</td></tr><tr><td><code>SHUTDOWN_REST_ENABLED</code></td><td>启用关闭 REST API</td><td>true</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="高级-jigasi-选项">高级 Jigasi 选项<a href="#高级-jigasi-选项" class="hash-link" aria-label="Direct link to 高级 Jigasi 选项" title="Direct link to 高级 Jigasi 选项">​</a></h4>
<table><thead><tr><th>变量</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td><code>JIGASI_ENABLE_SDES_SRTP</code></td><td>启用 SDES srtp</td><td>0</td></tr><tr><td><code>JIGASI_SIP_KEEP_ALIVE_METHOD</code></td><td>保持连接的方法</td><td>OPTIONS</td></tr><tr><td><code>JIGASI_HEALTH_CHECK_SIP_URI</code></td><td>健康检查扩展</td><td></td></tr><tr><td><code>JIGASI_HEALTH_CHECK_INTERVAL</code></td><td>健康检查间隔</td><td>300000</td></tr><tr><td><code>JIGASI_XMPP_USER</code></td><td>Jigasi MUC 客户端连接的 XMPP 用户</td><td>jigasi</td></tr><tr><td><code>JIGASI_XMPP_PASSWORD</code></td><td>Jigasi MUC 客户端连接的 XMPP 密码</td><td><code>&lt;unset&gt;</code></td></tr><tr><td><code>JIGASI_BREWERY_MUC</code></td><td>Jigasi 池的 MUC 名称</td><td>jigasibrewery</td></tr><tr><td><code>JIGASI_PORT_MIN</code></td><td>Jigasi 使用的媒体最小端口</td><td>20000</td></tr><tr><td><code>JIGASI_PORT_MAX</code></td><td>Jigasi 使用的媒体最大端口</td><td>20050</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="在-nat-或局域网环境中运行">在 NAT 或局域网环境中运行<a href="#在-nat-或局域网环境中运行" class="hash-link" aria-label="Direct link to 在 NAT 或局域网 环境中运行" title="Direct link to 在 NAT 或局域网环境中运行">​</a></h3>
<p>在局域网环境中运行，或通过 NAT 在公共互联网运行时，应设置 <code>JVB_ADVERTISE_IPS</code> 环境变量。此变量允许控制 JVB 将用于 WebRTC 媒体流量的 IP 地址。无论是否使用反向代理，都必须设置它，因为它是接收媒体（音频/视频）的 IP 地址，而不是 HTTP 流量，因此它与反向代理无关。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>此变量以前称为 <code>DOCKER_HOST_ADDRESS</code>，但为了清晰起见，它已被重命名以支持 IP 列表。</p></div></div>
<p>如果您的用户是通过互联网（而不是通过局域网）访问的，这通常是您的公共 IP 地址。如果未正确设置此项，当超过两名用户加入会议时，通话将崩溃。</p>
<p>尝试通过 <a href="https://en.wikipedia.org/wiki/STUN" target="_blank" rel="noopener noreferrer">STUN</a> 发现公共 IP 地址。可以使用 <code>JVB_STUN_SERVERS</code> 选项指定 STUN 服务器。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>由于当前在 Debian 仓库中的 Docker 版本（20.10.5）中的一个 bug，<a href="https://forums.docker.com/t/docker-doesnt-open-ipv6-ports/106201/2" target="_blank" rel="noopener noreferrer">Docker 不会监听 IPv6 端口</a>，因此对于该组合，您需要 <a href="https://docs.docker.com/engine/install/debian/" target="_blank" rel="noopener noreferrer">手动获取最新版本</a>。</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="拆分视图split-horizon">拆分视图(Split horizon)<a href="#拆分视图split-horizon" class="hash-link" aria-label="Direct link to 拆分视图(Split horizon)" title="Direct link to 拆分视图(Split horizon)">​</a></h4>
<p>如果您在拆分视图环境中运行（局域网内部客户端连接到本地 IP，而其他客户端连接到公共 IP），可以通过用逗号分隔来指定多个广告 IP：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JVB_ADVERTISE_IPS=192.168.1.1,1.2.3.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="离线--隔离安装">离线 / 隔离安装<a href="#离线--隔离安装" class="hash-link" aria-label="Direct link to 离线 / 隔离安装" title="Direct link to 离线 / 隔离安装">​</a></h4>
<p>如果您的设置无法访问互联网，则需要在 JVB 上禁用 STUN，因为发现其自身 IP 地址将失败，但在此类环境中不需要此操作。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">JVB_DISABLE_STUN=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="访问服务器日志">访问服务器日志<a href="#访问服务器日志" class="hash-link" aria-label="Direct link to 访问服务器日志" title="Direct link to 访问服务器日志">​</a></h2>
<p><code>docker-jitsi-meet</code> 的默认行为是将日志输出到 <code>stdout</code>。</p>
<p>虽然日志被发送到 <code>stdout</code>，但它们并未丢失：除非配置为丢弃所有日志，否则 Docker 会保留这些日志供将来检索和处理。</p>
<p>如果需要访问容器的日志，有多种方法可供选择。以下是主要方法：</p>
<ul>
<li>通过命令行运行 <code>docker compose logs -t -f &lt;service_name&gt;</code>，其中 <code>&lt;service_name&gt;</code> 是 <code>web</code>、<code>prosody</code>、<code>jvb</code>、<code>jicofo</code> 中的一个。此命令将日志输出到 <code>stdout</code>，并带有时间戳。</li>
<li>使用标准的 <a href="https://docs.docker.com/config/containers/logging/configure/" target="_blank" rel="noopener noreferrer">Docker 日志驱动程序</a> 将日志重定向到所需目标（例如 <code>syslog</code> 或 <code>splunk</code>）。</li>
<li>在 <a href="https://hub.docker.com/search?q=" target="_blank" rel="noopener noreferrer">Docker Hub</a> 搜索第三方 <a href="https://docs.docker.com/config/containers/logging/plugins/" target="_blank" rel="noopener noreferrer">Docker 日志驱动插件</a>。</li>
<li>或者，如果有非常具体的需求，可以<a href="https://docs.docker.com/engine/extend/plugins_logging/" target="_blank" rel="noopener noreferrer">编写自己的日志驱动插件</a>。</li>
</ul>
<p>例如，如果希望将与某个 <code>&lt;service_name&gt;</code> 相关的所有日志以 <code>json</code> 格式输出到 <code>/var/log/jitsi/&lt;service_name&gt;</code>，可以使用 <a href="https://github.com/deep-compute/docker-file-log-driver" target="_blank" rel="noopener noreferrer">docker-file-log-driver</a>，并在 <code>docker-compose.yml</code> 文件中为所选 <code>&lt;service_name&gt;</code> 添加以下配置块：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">&lt;service_name&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">logging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">driver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">driver</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token key atrule">fpath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/jitsi/&lt;service_name&gt;.log&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果只想以 <code>json</code> 格式显示日志的 <code>message</code> 部分，只需执行以下命令（假设 <code>fpath</code> 被设置为 <code>/jitsi/jvb.log</code>），使用 <code>jq</code> 提取日志中的相关部分：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> /var/log/jitsi/jvb.log </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> jq </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-r</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.msg&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> jq </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-r</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.message&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="构建说明">构建说明<a href="#构建说明" class="hash-link" aria-label="Direct link to 构建说明" title="Direct link to 构建说明">​</a></h2>
<p>构建映像使您能够单独编辑每个映像的配置文件，从而为部署提供更多自定义选项。</p>
<p>可以通过在主仓库文件夹中运行 <code>make</code> 命令来构建 Docker 映像。如果需要覆盖现有的远程源映像，使用 <code>FORCE_REBUILD=1 make</code>。</p>
<p>如果处于不稳定分支，可以使用 <code>FORCE_REBUILD=1 JITSI_RELEASE=unstable make</code> 构建映像。</p>
<p>现在可以像往常一样运行 <code>docker compose up</code>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="在反向代理后运行">在反向代理后运行<a href="#在反向代理后运行" class="hash-link" aria-label="Direct link to 在反向代理后运行" title="Direct link to 在反向代理后运行">​</a></h2>
<p>默认情况下，此设置使用 WebSocket 连接来处理两个核心组件：</p>
<ul>
<li>信令 - Signalling（XMPP）</li>
<li>桥接通道 - Bridge channel （Colibri）</li>
</ul>
<p>由于 WebSocket 的逐跳性质(hop-by-hop nature of WebSockets)，反向代理必须正确终止并转发 WebSocket 连接。以下两个路径需要进行处理：</p>
<ul>
<li>/xmpp-websocket</li>
<li>/colibri-ws</li>
</ul>
<p>使用 nginx，可以通过以下配置片段转发这些路径：</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">location /xmpp-websocket {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_pass https://localhost:8443;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_set_header Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_set_header Connection &quot;upgrade&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">location /colibri-ws {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_pass https://localhost:8443;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_set_header Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_set_header Connection &quot;upgrade&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此外，还需要为 <code>/http-bind</code> 配置一个路径，因为移动客户端仍然使用基于 BOSH 的 XMPP：</p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">location /http-bind {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_pass https://localhost:8443;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_set_header Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    proxy_set_header Connection &quot;upgrade&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用 Apache，需启用 <code>mod_proxy</code> 和 <code>mod_proxy_wstunnel</code>，并使用以下配置片段转发这些路径：</p>
<div class="language-apache codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-apache codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;IfModule mod_proxy.c&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;IfModule mod_proxy_wstunnel.c&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ProxyTimeout 900</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Location &quot;/xmpp-websocket&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ProxyPass &quot;wss://localhost:8443/xmpp-websocket&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/Location&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Location &quot;/colibri-ws/&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ProxyPass &quot;wss://localhost:8443/colibri-ws/&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/Location&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;Location &quot;/http-bind&quot;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ProxyPass &quot;http://localhost:8443/http-bind&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;/Location&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;/IfModule&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/IfModule&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中 <code>https://localhost:8443/</code> 是 Web 服务的入口 URL。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="禁用-websocket-连接">禁用 WebSocket 连接<a href="#禁用-websocket-连接" class="hash-link" aria-label="Direct link to 禁用 WebSocket 连接" title="Direct link to 禁用 WebSocket 连接">​</a></h3>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>这不是推荐的设置。</p></div></div>
<p>如果不能使用 WebSocket，可以设置以下环境变量以回退到 HTTP 轮询和 WebRTC 数据通道：</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ENABLE_SCTP</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ENABLE_COLIBRI_WEBSOCKET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ENABLE_XMPP_WEBSOCKET</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jitsi/handbook/edit/master/docs/devops-guide/docker.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-10-15T15:38:09.000Z" itemprop="dateModified">Oct 15, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/handbook/docs/devops-guide/devops-guide-opensuse"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">openSUSE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/handbook/docs/devops-guide/devops-guide-log-analyser"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Log Analyser - 日志分析器</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-start---快速上手" class="table-of-contents__link toc-highlight">Quick start - 快速上手</a><ul><li><a href="#更新" class="table-of-contents__link toc-highlight">更新</a></li><li><a href="#测试开发不稳定版本构建" class="table-of-contents__link toc-highlight">测试开发/不稳定版本构建</a></li><li><a href="#构建您自己的镜像" class="table-of-contents__link toc-highlight">构建您自己的镜像</a></li><li><a href="#安全提示" class="table-of-contents__link toc-highlight">安全提示</a></li></ul></li><li><a href="#架构" class="table-of-contents__link toc-highlight">架构</a><ul><li><a href="#外部端口" class="table-of-contents__link toc-highlight">外部端口</a></li><li><a href="#镜像" class="table-of-contents__link toc-highlight">镜像</a></li><li><a href="#设计考虑" class="table-of-contents__link toc-highlight">设计考虑</a></li></ul></li><li><a href="#配置" class="table-of-contents__link toc-highlight">配置</a><ul><li><a href="#tls-配置" class="table-of-contents__link toc-highlight">TLS 配置</a></li><li><a href="#功能配置configjs" class="table-of-contents__link toc-highlight">功能配置（config.js）</a></li><li><a href="#jigasi-sip-网关仅音频配置" class="table-of-contents__link toc-highlight">Jigasi SIP 网关（仅音频）配置</a></li><li><a href="#使用-jibri-进行录制直播配置" class="table-of-contents__link toc-highlight">使用 Jibri 进行录制/直播配置</a></li><li><a href="#jitsi-meet-配置" class="table-of-contents__link toc-highlight">Jitsi Meet 配置</a></li><li><a href="#身份验证" class="table-of-contents__link toc-highlight">身份验证</a></li><li><a href="#使用-etherpad-进行文档协作编辑" class="table-of-contents__link toc-highlight">使用 Etherpad 进行文档协作编辑</a></li><li><a href="#转录功能配置" class="table-of-contents__link toc-highlight">转录功能配置</a></li><li><a href="#sentry-日志配置" class="table-of-contents__link toc-highlight">Sentry 日志配置</a></li><li><a href="#turn-服务器配置" class="table-of-contents__link toc-highlight">TURN 服务器配置</a></li><li><a href="#高级配置" class="table-of-contents__link toc-highlight">高级配置</a></li><li><a href="#在-nat-或局域网环境中运行" class="table-of-contents__link toc-highlight">在 NAT 或局域网环境中运行</a></li></ul></li><li><a href="#访问服务器日志" class="table-of-contents__link toc-highlight">访问服务器日志</a></li><li><a href="#构建说明" class="table-of-contents__link toc-highlight">构建说明</a></li><li><a href="#在反向代理后运行" class="table-of-contents__link toc-highlight">在反向代理后运行</a><ul><li><a href="#禁用-websocket-连接" class="table-of-contents__link toc-highlight">禁用 WebSocket 连接</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/handbook/docs/intro">Introduction - 概述</a></li><li class="footer__item"><a class="footer__link-item" href="/handbook/docs/category/user-guide">User Guide - 用户指南</a></li><li class="footer__item"><a class="footer__link-item" href="/handbook/docs/category/developer-guide">Developer Guide - 开发者指南</a></li><li class="footer__item"><a class="footer__link-item" href="/handbook/docs/devops-guide">Self-Hosting Guide - 自托管指南</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community - 社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://community.jitsi.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum - 论坛<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/jitsinews" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More - 更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://jitsi.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog - 博客<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/jitsi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://jaas.8x8.vc" target="_blank" rel="noopener noreferrer" class="footer__link-item">JaaS: Jitsi as a Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://8x8.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/handbook/img/8x8-copyright-icon.svg" alt="8x8 Footer Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/handbook/img/8x8-copyright-icon.svg" alt="8x8 Footer Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 8x8, Inc.</div></div></div></footer></div>
</body>
</html>