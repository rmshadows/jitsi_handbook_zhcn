"use strict";(self.webpackChunk_jitsi_handbook=self.webpackChunk_jitsi_handbook||[]).push([[2681],{9184:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>c,toc:()=>h});var i=s(4848),l=s(8453);const r={id:"devops-guide-log-analyser",title:"Self-Hosting Guide - Log Analyser",sidebar_label:"Log Analyser - \u65e5\u5fd7\u5206\u6790\u5668"},d=void 0,c={id:"devops-guide/devops-guide-log-analyser",title:"Self-Hosting Guide - Log Analyser",description:"\u6982\u8ff0",source:"@site/docs/devops-guide/log-analyser.md",sourceDirName:"devops-guide",slug:"/devops-guide/devops-guide-log-analyser",permalink:"/handbook/docs/devops-guide/devops-guide-log-analyser",draft:!1,unlisted:!1,editUrl:"https://github.com/jitsi/handbook/edit/master/docs/devops-guide/log-analyser.md",tags:[],version:"current",lastUpdatedAt:1729006689e3,frontMatter:{id:"devops-guide-log-analyser",title:"Self-Hosting Guide - Log Analyser",sidebar_label:"Log Analyser - \u65e5\u5fd7\u5206\u6790\u5668"},sidebar:"docs",previous:{title:"Docker",permalink:"/handbook/docs/devops-guide/devops-guide-docker"},next:{title:"Configuration",permalink:"/handbook/docs/category/configuration"}},o={},h=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u5165\u95e8",id:"\u5165\u95e8",level:2},{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:3},{value:"\u8bbe\u7f6e\u6b65\u9aa4",id:"\u8bbe\u7f6e\u6b65\u9aa4",level:3},{value:"\u8bbf\u95ee Grafana",id:"\u8bbf\u95ee-grafana",level:3},{value:"\u9884\u914d\u7f6e\u4eea\u8868\u76d8",id:"\u9884\u914d\u7f6e\u4eea\u8868\u76d8",level:3},{value:"\u4f7f\u7528 LogQL \u8fc7\u6ee4\u65e5\u5fd7",id:"\u4f7f\u7528-logql-\u8fc7\u6ee4\u65e5\u5fd7",level:3},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u81ea\u5b9a\u4e49\u4eea\u8868\u76d8",id:"\u81ea\u5b9a\u4e49\u4eea\u8868\u76d8",level:3},{value:"\u6545\u969c\u6392\u9664",id:"\u6545\u969c\u6392\u9664",level:3},{value:"\u81f4\u8c22",id:"\u81f4\u8c22",level:2}];function j(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,i.jsx)(e.p,{children:"\u8be5\u9879\u76ee\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5316\u7684\u8bbe\u7f6e\uff0c\u65e8\u5728\u6536\u96c6\u3001\u89e3\u6790\u548c\u53ef\u89c6\u5316\u7531 Jitsi Meet \u7ec4\u4ef6\u751f\u6210\u7684\u65e5\u5fd7\u6570\u636e\u3002\u96c6\u6210\u5305\u62ec\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u7528\u4e8e\u914d\u7f6e Loki \u548c OpenTelemetry Collector \u7684 Docker Compose \u8bbe\u7f6e\u6587\u4ef6 (",(0,i.jsx)(e.code,{children:"log-analyser.yml"}),")\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u7528\u4e8e\u914d\u7f6e Grafana \u7684 Docker Compose \u8bbe\u7f6e\u6587\u4ef6 (",(0,i.jsx)(e.code,{children:"grafana.yml"}),")\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u4e00\u4e2a\u7edf\u4e00\u7684 Docker Compose \u547d\u4ee4\uff0c\u53ef\u4ee5\u540c\u65f6\u542f\u52a8\u6240\u6709\u670d\u52a1\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5173\u4e8e\u5982\u4f55\u914d\u7f6e Grafana \u5c06 Loki \u4f5c\u4e3a\u65e5\u5fd7\u6570\u636e\u6e90\u7684\u8bf4\u660e\uff0c\u4ee5\u5b9e\u73b0\u589e\u5f3a\u7684\u53ef\u89c6\u5316\u548c\u5206\u6790\u3002"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u5165\u95e8",children:"\u5165\u95e8"}),"\n",(0,i.jsx)(e.h3,{id:"\u524d\u63d0\u6761\u4ef6",children:"\u524d\u63d0\u6761\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684\u7cfb\u7edf\u4e0a\u5df2\u5b89\u88c5\u4ee5\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.docker.com/get-docker/",children:"Docker"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.docker.com/compose/install/",children:"Docker Compose"})}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u8bbe\u7f6e\u6b65\u9aa4",children:"\u8bbe\u7f6e\u6b65\u9aa4"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u514b\u9686\u4ed3\u5e93\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:"\u514b\u9686\u5305\u542b\u6240\u9700 Docker Compose \u6587\u4ef6\u7684 Jitsi Meet \u4ed3\u5e93\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"git clone https://github.com/jitsi/docker-jitsi-meet.git\ncd docker-jitsi-meet\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u66f4\u65b0 Jitsi Meet Docker Compose \u914d\u7f6e\uff1a"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3a\u4e86\u542f\u7528\u65e5\u5fd7\u6536\u96c6\u548c\u5206\u6790\uff0c\u60a8\u9700\u8981\u4fee\u6539 Jitsi Meet \u7ec4\u4ef6\u7684 ",(0,i.jsx)(e.code,{children:"docker-compose.yml"})," \u6587\u4ef6\u3002\u5c06\u4ee5\u4e0b\u914d\u7f6e\u6dfb\u52a0\u5230 ",(0,i.jsx)(e.code,{children:"docker-compose.yml"})," \u6587\u4ef6\u4e2d\u7684\u6bcf\u4e2a Jitsi \u670d\u52a1\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'logging:\n driver: "json-file"\n options:\n   labels: "service"\n'})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u542f\u52a8 Docker \u5bb9\u5668\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8\u6240\u9700\u7684\u6240\u6709\u670d\u52a1\uff0c\u5305\u62ec Jitsi Meet \u7ec4\u4ef6\u3001Grafana\u3001Loki \u548c OpenTelemetry\uff1a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"docker-compose -f docker-compose.yml -f log-analyser.yml -f grafana.yml up -d\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u89e3\u91ca\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u8be5\u547d\u4ee4\u7ec4\u5408\u591a\u4e2a Docker Compose \u6587\u4ef6\u4ee5\u542f\u52a8\u6574\u4e2a\u5806\u6808\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"docker-compose.yml"})," \u542f\u52a8 Jitsi Meet \u7ec4\u4ef6\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"log-analyser.yml"})," \u8bbe\u7f6e\u65e5\u5fd7\u5206\u6790\u5de5\u5177\uff0c\u5305\u62ec Loki \u548c OpenTelemetry\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"grafana.yml"})," \u521d\u59cb\u5316\u7528\u4e8e\u65e5\u5fd7\u53ef\u89c6\u5316\u7684 Grafana\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u8bbf\u95ee-grafana",children:"\u8bbf\u95ee Grafana"}),"\n",(0,i.jsx)(e.p,{children:"\u542f\u52a8\u670d\u52a1\u540e\uff0c\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8bbf\u95ee Grafana\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 Grafana\uff1a"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8bbf\u95ee ",(0,i.jsx)(e.a,{href:"http://localhost:3000",children:"http://localhost:3000"})," \u4ee5\u6253\u5f00 Grafana \u754c\u9762\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u767b\u5f55 Grafana\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8ba4\u767b\u5f55\u51ed\u636e\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u7528\u6237\u540d:"})," ",(0,i.jsx)(e.code,{children:"admin"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5bc6\u7801:"})," ",(0,i.jsx)(e.code,{children:"admin"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\uff08\u5efa\u8bae\u9996\u6b21\u767b\u5f55\u540e\u66f4\u6539\u8fd9\u4e9b\u51ed\u636e\u4ee5\u786e\u4fdd\u5b89\u5168\uff09\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u9884\u914d\u7f6e\u4eea\u8868\u76d8",children:"\u9884\u914d\u7f6e\u4eea\u8868\u76d8"}),"\n",(0,i.jsx)(e.p,{children:"Grafana \u914d\u5907\u4e86\u51e0\u4e2a\u4e13\u95e8\u7528\u4e8e\u76d1\u63a7\u4e0d\u540c Jitsi Meet \u7ec4\u4ef6\u7684\u9884\u914d\u7f6e\u4eea\u8868\u76d8\u3002\u8fd9\u4e9b\u4eea\u8868\u76d8\u5728\u4f60\u767b\u5f55 Grafana \u540e\u4f1a\u81ea\u52a8\u53ef\u7528\u3002"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u91cd\u8981\u63d0\u793a\u2757\ufe0f\uff1a"})," \u8981\u8ba9\u8fd9\u4e9b\u4eea\u8868\u76d8\u663e\u793a\u6570\u636e\uff0c\u5fc5\u987b\u7531 Jitsi Meet \u7ec4\u4ef6\u751f\u6210\u65e5\u5fd7\u3002\u4ee5\u4e0b\u662f\u53ef\u7528\u7684\u4eea\u8868\u76d8\uff1a"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Jicofo \u4eea\u8868\u76d8"}),"\uff1a\u53ef\u89c6\u5316\u4e0e Jitsi Conference Focus (Jicofo) \u76f8\u5173\u7684\u65e5\u5fd7\uff0c\u5b83\u5904\u7406 Jitsi Meet \u4e2d\u7684\u5a92\u4f53\u548c\u4fe1\u4ee4\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"JVB \u4eea\u8868\u76d8"}),"\uff1a\u4e13\u6ce8\u4e8e Jitsi Videobridge (JVB) \u65e5\u5fd7\uff0c\u5c55\u793a\u89c6\u9891\u6d41\u548c\u6027\u80fd\u6307\u6807\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Prosody \u4eea\u8868\u76d8"}),"\uff1a\u76d1\u63a7\u7528\u4e8e\u4fe1\u4ee4\u7684 XMPP \u670d\u52a1\u5668 Prosody\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Web \u4eea\u8868\u76d8"}),"\uff1a\u663e\u793a\u4e0e Jitsi Meet \u524d\u7aef\u76f8\u5173\u7684\u65e5\u5fd7\u548c\u6307\u6807\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Jitsi All \u4eea\u8868\u76d8"}),"\uff1a\u4e00\u4e2a\u6c47\u603b\u6240\u6709 Jitsi Meet \u7ec4\u4ef6\u65e5\u5fd7\u7684\u7efc\u5408\u4eea\u8868\u76d8\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"Jitsi Meet Log Analyser Dashboard",src:s(6016).A+"",width:"2870",height:"1604"})}),"\n",(0,i.jsx)(e.h3,{id:"\u4f7f\u7528-logql-\u8fc7\u6ee4\u65e5\u5fd7",children:"\u4f7f\u7528 LogQL \u8fc7\u6ee4\u65e5\u5fd7"}),"\n",(0,i.jsx)(e.p,{children:"\u9664\u4e86\u9884\u914d\u7f6e\u7684\u4eea\u8868\u76d8\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 LogQL\uff08\u4e00\u79cd\u4e13\u4e3a Loki \u8bbe\u8ba1\u7684\u5f3a\u5927\u67e5\u8be2\u8bed\u8a00\uff09\u5728 Grafana \u7684 \u201cExplore\u201d \u90e8\u5206\u4e2d\u63a2\u7d22\u548c\u8fc7\u6ee4\u65e5\u5fd7\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u8fc7\u6ee4\u548c\u5206\u6790\u65e5\u5fd7\u7684\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u8bbf\u95ee Explore \u90e8\u5206\uff1a"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 Grafana \u4e2d\uff0c\u4ece\u5de6\u4fa7\u8fb9\u680f\u5bfc\u822a\u5230 ",(0,i.jsx)(e.strong,{children:"Explore"})," \u6807\u7b7e\u3002\u8fd9\u90e8\u5206\u5141\u8bb8\u4f60\u5b9e\u65f6\u67e5\u8be2\u65e5\u5fd7\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9009\u62e9 Loki \u6570\u636e\u6e90\uff1a"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5728 Explore \u90e8\u5206\uff0c\u786e\u4fdd ",(0,i.jsx)(e.strong,{children:"Data Source"})," \u8bbe\u7f6e\u4e3a ",(0,i.jsx)(e.strong,{children:"Loki"}),"\uff0c\u56e0\u4e3a Loki \u662f\u6536\u96c6\u548c\u7ba1\u7406 Jitsi Meet \u7ec4\u4ef6\u65e5\u5fd7\u6570\u636e\u7684\u540e\u7aef\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4f7f\u7528 LogQL \u8fdb\u884c\u8fc7\u6ee4\uff1a"})}),"\n",(0,i.jsxs)(e.p,{children:["LogQL \u5141\u8bb8\u4f60\u521b\u5efa\u590d\u6742\u7684\u67e5\u8be2\u6765\u8fc7\u6ee4\u7279\u5b9a\u7684\u65e5\u5fd7\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b LogQL \u67e5\u8be2\u8fc7\u6ee4 ",(0,i.jsx)(e.code,{children:"jitsi-jicofo"})," \u7ec4\u4ef6\u7684\u65e5\u5fd7\u5e76\u89e3\u6790\u5b83\u4eec\uff1a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-logql",children:'{exporter="OTLP"} | json | attributes_attrs_service="jitsi-jicofo"\n'})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u89e3\u91ca\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:'{exporter="OTLP"}'}),"\uff1a\u9009\u62e9\u901a\u8fc7 OpenTelemetry \u5bfc\u51fa\u7684\u65e5\u5fd7\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"| json"}),"\uff1a\u5c06\u65e5\u5fd7\u6570\u636e\u89e3\u6790\u4e3a JSON\uff0c\u4f7f\u5176\u5c5e\u6027\u53ef\u4f9b\u8fc7\u6ee4\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:'attributes_attrs_service="jitsi-jicofo"'}),"\uff1a\u8fc7\u6ee4 ",(0,i.jsx)(e.code,{children:"attributes_attrs_service"})," \u5b57\u6bb5\u7b49\u4e8e ",(0,i.jsx)(e.code,{children:'"jitsi-jicofo"'})," \u7684\u65e5\u5fd7\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\u67e5\u8be2\u4ee5\u8fc7\u6ee4\u5176\u4ed6\u7ec4\u4ef6\u7684\u65e5\u5fd7\u6216\u8c03\u6574\u67e5\u8be2\u6761\u4ef6\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u6709\u5173 LogQL \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u548c\u9ad8\u7ea7\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003 Grafana \u5b98\u65b9\u7684 ",(0,i.jsx)(e.a,{href:"https://grafana.com/docs/loki/latest/logql/",children:"LogQL \u6587\u6863"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"LogQL Query Example",src:s(6639).A+"",width:"2876",height:"1720"})}),"\n",(0,i.jsx)(e.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u65e6\u8bbe\u7f6e\u5b8c\u6210\uff0c\u4f60\u5c31\u53ef\u4ee5\u5f00\u59cb\u5728 Grafana \u4e2d\u63a2\u7d22\u65e5\u5fd7\u6570\u636e\u3002\u9884\u914d\u7f6e\u7684\u4eea\u8868\u76d8\u63d0\u4f9b\u4e86\u4ece Jitsi Meet \u7ec4\u4ef6\u6536\u96c6\u7684\u65e5\u5fd7\u7684\u6df1\u5165\u53ef\u89c6\u5316\u3002\u4f7f\u7528\u8fd9\u4e9b\u4eea\u8868\u76d8\u53ef\u4ee5\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u89e3\u6790\u65e5\u5fd7\uff1a"})," \u67e5\u770b\u4ece\u5404\u4e2a\u7ec4\u4ef6\u6536\u96c6\u7684\u8be6\u7ec6\u65e5\u5fd7\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u53ef\u89c6\u5316\u65e5\u5fd7\uff1a"})," \u901a\u8fc7\u5404\u79cd\u56fe\u8868\u3001\u56fe\u5f62\u548c\u9762\u677f\u5206\u6790\u65e5\u5fd7\u6570\u636e\uff0c\u4ee5\u83b7\u53d6\u7cfb\u7edf\u6027\u80fd\u548c\u95ee\u9898\u7684\u89c1\u89e3\u3002"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u81ea\u5b9a\u4e49\u4eea\u8868\u76d8",children:"\u81ea\u5b9a\u4e49\u4eea\u8868\u76d8"}),"\n",(0,i.jsx)(e.p,{children:"\u867d\u7136\u9884\u914d\u7f6e\u7684\u4eea\u8868\u76d8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u826f\u597d\u7684\u8d77\u70b9\uff0c\u4f46\u4f60\u53ef\u80fd\u5e0c\u671b\u81ea\u5b9a\u4e49\u5b83\u4eec\u6216\u521b\u5efa\u65b0\u4eea\u8868\u76d8\u4ee5\u6ee1\u8db3\u4f60\u7684\u7279\u5b9a\u9700\u6c42\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u6b65\u9aa4\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u521b\u5efa\u65b0\u4eea\u8868\u76d8\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:'\u8f6c\u5230 Grafana \u4e3b\u9875\u9762\uff0c\u70b9\u51fb\u5de6\u4fa7\u8fb9\u680f\u7684 "+" \u56fe\u6807\uff0c\u7136\u540e\u9009\u62e9 "Dashboard"\u3002'}),"\n",(0,i.jsx)(e.li,{children:"\u901a\u8fc7\u9009\u62e9\u9002\u5f53\u7684\u6570\u636e\u6e90\uff08Loki\uff09\u548c\u4f7f\u7528 LogQL \u67e5\u8be2\u6765\u6dfb\u52a0\u9762\u677f\u4ee5\u53ef\u89c6\u5316\u4e0d\u540c\u7684\u6307\u6807\u6216\u65e5\u5fd7\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u81ea\u5b9a\u4e49\u73b0\u6709\u4eea\u8868\u76d8\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:'\u5bfc\u822a\u5230\u73b0\u6709\u4eea\u8868\u76d8\uff0c\u70b9\u51fb\u4efb\u4f55\u9762\u677f\u4e0a\u7684 "Edit" \u6309\u94ae\uff08\u94c5\u7b14\u56fe\u6807\uff09\u3002'}),"\n",(0,i.jsx)(e.li,{children:"\u8c03\u6574 LogQL \u67e5\u8be2\u3001\u53ef\u89c6\u5316\u7c7b\u578b\u548c\u9762\u677f\u8bbe\u7f6e\u4ee5\u5339\u914d\u4f60\u7684\u8981\u6c42\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4fdd\u5b58\u548c\u5206\u4eab\u4eea\u8868\u76d8\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u81ea\u5b9a\u4e49\u540e\uff0c\u4fdd\u5b58\u4eea\u8868\u76d8\u3002\u4f60\u4e5f\u53ef\u4ee5\u5c06\u5176\u5bfc\u51fa\u4e3a JSON \u6587\u4ef6\u4ee5\u5206\u4eab\u7ed9\u4ed6\u4eba\u6216\u7528\u4e8e\u5907\u4efd\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u5bfc\u51fa\u4eea\u8868\u76d8\u7684\u6b65\u9aa4\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u70b9\u51fb\u4eea\u8868\u76d8\u6807\u9898\u4ee5\u6253\u5f00\u9009\u9879\u83dc\u5355\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u9009\u62e9 ",(0,i.jsx)(e.strong,{children:'"Dashboard settings"'})," > ",(0,i.jsx)(e.strong,{children:'"JSON Model"'}),"\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:["\u70b9\u51fb ",(0,i.jsx)(e.strong,{children:'"Download JSON"'})," \u5c06\u6587\u4ef6\u4fdd\u5b58\u5728\u672c\u5730\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e3a Jitsi Meet \u4eea\u8868\u76d8\u8d21\u732e\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4f60\u521b\u5efa\u6216\u81ea\u5b9a\u4e49\u7684\u4eea\u8868\u76d8\u53ef\u80fd\u5bf9\u66f4\u5e7f\u6cdb\u7684 Jitsi \u793e\u533a\u6709\u76ca\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u66f4\u65b0\u76f8\u5173\u7684\u4eea\u8868\u76d8 JSON \u6587\u4ef6\u6765\u8d21\u732e\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a","\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6309\u7167\u4e0a\u9762\u63cf\u8ff0\u7684\u6b65\u9aa4\u5bfc\u51fa\u81ea\u5b9a\u4e49\u4eea\u8868\u76d8\u7684 JSON \u6587\u4ef6\u3002"}),"\n",(0,i.jsxs)(e.li,{children:["\u5728\u4ee3\u7801\u5e93\u4e2d\u627e\u5230\u76f8\u5e94\u7684 Jitsi \u7ec4\u4ef6\u4eea\u8868\u76d8 JSON \u6587\u4ef6\uff08\u4f8b\u5982\uff0c",(0,i.jsx)(e.code,{children:"jicofo-dashboard.json"}),"\u3001",(0,i.jsx)(e.code,{children:"jvb-dashboard.json"}),"\uff09\u3002"]}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u4f60\u7684\u66f4\u6539\u66f4\u65b0\u73b0\u6709\u7684 JSON \u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u5411\u4ee3\u7801\u5e93\u63d0\u4ea4\u4e00\u4e2a\u62c9\u53d6\u8bf7\u6c42\uff0c\u9644\u4e0a\u66f4\u65b0\u7684 JSON \u6587\u4ef6\u548c\u5bf9\u6240\u505a\u66f4\u6539\u7684\u7b80\u8981\u63cf\u8ff0\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.li,{children:"\u8fd9\u6709\u52a9\u4e8e\u6539\u5584\u9884\u914d\u7f6e\u7684\u4eea\u8868\u76d8\uff0c\u4f7f\u4f60\u7684\u8d21\u732e\u80fd\u591f\u60e0\u53ca\u6240\u6709\u7528\u6237\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Grafana \u914d\u7f6e\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Jitsi Meet Log Analyser \u4f7f\u7528 Grafana \u914d\u7f6e\u6765\u7ba1\u7406\u4eea\u8868\u76d8\u3002\u5f53\u4f60\u5728\u4ee3\u7801\u5e93\u4e2d\u66f4\u65b0\u4eea\u8868\u76d8 JSON \u6587\u4ef6\u65f6\uff0c\u5806\u6808\u90e8\u7f72\u65f6\u4f1a\u81ea\u52a8\u5728 Grafana \u4e2d\u914d\u7f6e\u8fd9\u4e9b\u4eea\u8868\u76d8\u3002"}),"\n",(0,i.jsx)(e.li,{children:"\u8fd9\u786e\u4fdd\u6bcf\u4e2a\u4f7f\u7528\u8be5\u4ee3\u7801\u5e93\u7684\u4eba\u90fd\u80fd\u83b7\u5f97\u4eea\u8868\u76d8\u7684\u6700\u65b0\u7248\u672c\uff0c\u800c\u65e0\u9700\u624b\u52a8\u5bfc\u5165\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u901a\u8fc7\u9075\u5faa\u8fd9\u4e9b\u6b65\u9aa4\uff0c\u4f60\u4e0d\u4ec5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u81ea\u5df1\u7684\u76d1\u63a7\u8bbe\u7f6e\uff0c\u8fd8\u53ef\u4ee5\u5c06\u6539\u8fdb\u53cd\u9988\u7ed9 Jitsi \u793e\u533a\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u6545\u969c\u6392\u9664",children:"\u6545\u969c\u6392\u9664"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u5728\u8bbe\u7f6e\u6216\u4f7f\u7528 Jitsi Meet Log Analyser \u65f6\u9047\u5230\u95ee\u9898\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u95ee\u9898\u53ca\u5176\u89e3\u51b3\u65b9\u6848\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Grafana \u672a\u542f\u52a8\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker ps"})," \u68c0\u67e5 Grafana \u5bb9\u5668\u662f\u5426\u6b63\u5728\u8fd0\u884c\uff0c\u5e76\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker logs grafana"})," \u68c0\u67e5\u662f\u5426\u6709\u9519\u8bef\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Grafana \u4eea\u8868\u76d8\u4e2d\u6ca1\u6709\u65e5\u5fd7\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u786e\u4fdd Jitsi Meet \u7ec4\u4ef6\u6b63\u5728\u751f\u6210\u65e5\u5fd7\u3002\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\uff0c\u91cd\u65b0\u52a0\u8f7d Grafana\u3002\u786e\u4fdd OpenTelemetry\u3001Loki \u548c Grafana \u5bb9\u5668\u90fd\u5728\u8fd0\u884c\uff0c\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker ps"})," \u68c0\u67e5\uff0c\u5e76\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker logs <container_name>"})," \u68c0\u67e5\u6bcf\u4e2a\u5bb9\u5668\u7684\u65e5\u5fd7\u4ee5\u5bfb\u627e\u95ee\u9898\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"OpenTelemetry \u6536\u96c6\u5668\u672a\u8f6c\u53d1\u65e5\u5fd7\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker logs otel"})," \u68c0\u67e5 OpenTelemetry \u7684\u65e5\u5fd7\uff0c\u786e\u4fdd\u5b83\u8fde\u63a5\u5230\u6b63\u786e\u7684\u7aef\u70b9\uff0c\u5e76\u9a8c\u8bc1\u65e5\u5fd7\u683c\u5f0f\u662f\u5426\u6b63\u786e\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Grafana \u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker restart grafana otel"})," \u91cd\u542f Grafana\u3002\u5982\u679c\u4ecd\u7136\u5931\u8d25\uff0c\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker-compose down -v"})," \u5220\u9664\u6570\u636e\u5377\u5e76\u91cd\u542f\uff0c\u4ee5\u91cd\u7f6e\u4e3a\u9ed8\u8ba4\u51ed\u636e\uff08admin/admin\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u67e5\u8be2\u7f13\u6162\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c LogQL \u67e5\u8be2\u7f13\u6162\uff0c\u5c1d\u8bd5\u5728 Grafana \u4e2d\u4f18\u5316\u67e5\u8be2\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u6743\u9650\u95ee\u9898\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u9047\u5230\u6743\u9650\u95ee\u9898\uff0c\u8bf7\u786e\u4fdd Docker \u5bf9\u5b58\u50a8\u65e5\u5fd7\u7684\u76ee\u5f55\u5177\u6709\u5fc5\u8981\u7684\u8bbf\u95ee\u6743\u9650\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Docker \u7f51\u7edc\u95ee\u9898\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u9a8c\u8bc1 Docker \u7f51\u7edc\u8fde\u63a5\u3001IP \u8303\u56f4\uff0c\u5982\u6709\u5fc5\u8981\uff0c\u91cd\u542f\u7f51\u7edc\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"OpenTelemetry \u6536\u96c6\u5668\u672a\u8f6c\u53d1\u65e5\u5fd7\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u68c0\u67e5 OpenTelemetry \u65e5\u5fd7\uff0c\u9a8c\u8bc1\u914d\u7f6e\uff0c\u5e76\u786e\u4fdd\u65e5\u5fd7\u683c\u5f0f\u517c\u5bb9\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Docker \u5bb9\u5668\u672a\u80fd\u542f\u52a8\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,i.jsx)(e.code,{children:"docker-compose logs"})," \u67e5\u770b\u8be6\u7ec6\u542f\u52a8\u9519\u8bef\uff0c\u68c0\u67e5\u662f\u5426\u5b58\u5728\u5e38\u89c1\u95ee\u9898\uff0c\u5982\u914d\u7f6e\u9519\u8bef\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u81f4\u8c22",children:"\u81f4\u8c22"}),"\n",(0,i.jsx)(e.p,{children:"\u611f\u8c22\u4f60\u5bf9 Jitsi Meet Log Analyser \u9879\u76ee\u7684\u5173\u6ce8\uff01\u5982\u679c\u4f60\u9047\u5230\u4efb\u4f55\u95ee\u9898\u6216\u6709\u7591\u95ee\uff0c\u8bf7\u968f\u65f6\u8054\u7cfb\u9879\u76ee\u7ef4\u62a4\u8005\u6216\u4e3a\u4ee3\u7801\u5e93\u8d21\u732e\u3002"})]})}function a(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(j,{...n})}):j(n)}},6016:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/2e54833e-4906-4429-81ce-7e56b7bf38d1-d59d1d3fb5ac61792bfe1be9cb9be764.bin"},6639:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/f75c77a6-6f7b-41ae-9efe-855a5b426bdf-6e2f79c86618e4231ac31b5adfd3adfd.bin"},8453:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>c});var i=s(6540);const l={},r=i.createContext(l);function d(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);